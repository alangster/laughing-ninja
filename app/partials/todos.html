<div ng-controller="LoginCtrl as login">
	<button ng-click="login.logout()">Logout</button>
</div>

<div ng-controller="TodosCtrl as tdc">

	<div ng-controller="CreateTodoCtrl as creator">
		<form ng-submit="creator.addTodo()">
			<input type="text" 
						 ng-model="creator.newTodo.description"
						 placeholder="What must you do?" />
			<input type="submit" value="Put it on the list!" />
		</form>
	</div>

	{{ tdc.errors.todoFetch }}
	<input type="text" ng-model="query" />
	<button ng-click="tdc.displayAll()">All Todos</button>
	<button ng-click="tdc.displayComplete()">Complete</button>
	<button ng-click="tdc.displayIncomplete()">Incomplete</button>

	<ul as-sortable="tdc.dragControlListeners"
			ng-model="tdc.TodosCollectionService.todos">
		<li ng-repeat="todo in tdc.TodosCollectionService.todos | filter:query | filter:tdc.status"
			  ng-model="todo"
			  as-sortable-item>
		  <div as-sortable-item-handle>
		  	<input type="checkbox" 
		  				 ng-model="todo.is_complete" 
		  				 ng-click="tdc.toggleCompletion(todo)"/>
		  	<form ng-submit="tdc.editTodo(todo)">
				  <input type="text" ng-focus="tdc.saveOriginal(todo)" ng-model="todo.description" />
		  	</form>
			</div>	
		</li>
	</ul>

	{{ tdc.TodosCollectionService.todoCounts }}
			
	<div google-chart 
			 chart="tdc.chart"
			 style="border:1px inset black;padding:0;width:400px;height:400px">
	</div>
	{{ tdc.chart|json }}

</div>
